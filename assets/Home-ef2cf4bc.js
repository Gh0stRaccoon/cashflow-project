import{_ as $,r as m,o as d,c as v,a as e,b as S,w as f,v as N,F as B,p as k,d as C,e as H,f as U,g as y,t as T,u as p,h as j,i as O,n as P,j as X,k as V,l as I,m as M,q as z,s as D,x as R,T as J,y as q}from"./index-b9bfd4c8.js";const E=t=>(k("data-v-5208aea2"),t=t(),C(),t),W={class:"header"},K={class:"resume"},Q={class:"movements"},Y=E(()=>e("div",{class:"grip"},null,-1)),Z=[Y],ee={class:"body"},te={__name:"Layout",setup(t){const l=m(!1);return(s,n)=>(d(),v(B,null,[e("div",W,[S(s.$slots,"header",{},void 0,!0)]),e("div",K,[S(s.$slots,"resume",{},void 0,!0)]),e("div",Q,[e("div",{class:"head",onClick:n[0]||(n[0]=c=>l.value=!l.value)},Z),f(e("div",ee,[S(s.$slots,"movements",{},void 0,!0)],512),[[N,l.value]])])],64))}},oe=$(te,[["__scopeId","data-v-5208aea2"]]);const L=t=>(k("data-v-dc0facc9"),t=t(),C(),t),se=L(()=>e("h1",null,[e("span",null,"Cash"),U("Flow")],-1)),ne=L(()=>e("span",null,null,-1)),ae={__name:"Header",setup(t){const l=()=>{location.reload()};return(s,n)=>(d(),v("header",null,[e("img",{src:H,alt:"logo",onClick:l}),se,ne]))}},le=$(ae,[["__scopeId","data-v-dc0facc9"]]),F=new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP"});const ce={class:"graphic"},ue={class:"action"},ie={__name:"Index",props:{label:String,amount:Number,totalAmount:Number},setup(t){const l=t,s=y(()=>l.amount?l.amount:l.totalAmount),n=y(()=>F.format(s.value));return(c,i)=>(d(),v("main",null,[e("p",null,T(t.label),1),e("h1",null,T(p(n)),1),e("div",ce,[S(c.$slots,"graphic",{},void 0,!0)]),e("div",ue,[S(c.$slots,"action",{},void 0,!0)])]))}},_e=$(ie,[["__scopeId","data-v-f27c0767"]]);const re=t=>(k("data-v-d4462e30"),t=t(),C(),t),de=["y1","y2"],me=["points"],ve=["x1","x2"],pe=re(()=>e("p",null,"Últimos 30 días",-1)),he={__name:"Graphic",props:{amounts:{type:Array,default:()=>[]}},emits:["select"],setup(t,{emit:l}){const s=t,{amounts:n}=j(s),c=_=>{const r=Math.min(...n.value),x=Math.max(...n.value),b=_+Math.abs(r),A=Math.abs(x)+Math.abs(r);return 200-b*100/A*2},i=y(()=>c(0)),u=y(()=>{const _=n.value.length-1;return n.value.reduce((r,x,b)=>{const A=300/_*b,G=c(x);return`${r} ${A},${G}`},"")}),h=m(!1),g=m(0);O(g,_=>{const r=Math.ceil(_/(300/n.value.length));r<0||r>n.value.length||l("select",n.value[r-1])});const o=({target:_,touches:r})=>{h.value=!0;const x=_.getBoundingClientRect().width,b=_.getBoundingClientRect().x,A=r[0].clientX;g.value=(A-b)*300/x},a=()=>{h.value=!1};return(_,r)=>(d(),v("div",null,[(d(),v("svg",{viewBox:"0 0 300 200",onTouchstart:o,onTouchmove:o,onTouchend:a},[e("line",{stroke:"#c4c4c4","stroke-width":"2",x1:"0",y1:p(i),x2:"300",y2:p(i)},null,8,de),e("polyline",{fill:"none",stroke:"#0689B0","stroke-width":"2",points:p(u)},null,8,me),f(e("line",{stroke:"#04B500","stroke-width":"2",x1:g.value,y1:"0",x2:g.value,y2:"200"},null,8,ve),[[N,h.value]])],32)),pe]))}},fe=$(he,[["__scopeId","data-v-d4462e30"]]),ye="/cashflow-project/assets/trash-icon-4f01394e.svg";const $e={class:"movement"},ge={class:"content"},xe={class:"action"},be={__name:"Movement",props:{movement:{type:Object}},emits:["remove"],setup(t,{emit:l}){const s=t,n=()=>l("remove",s.movement.id),c=y(()=>F.format(s.movement.amount)),i=y(()=>s.movement.amount<0);return(u,h)=>(d(),v("div",$e,[e("div",ge,[e("h4",null,T(s.movement.title),1),e("p",null,T(s.movement.description),1)]),e("div",xe,[e("img",{src:ye,alt:"borrar",onClick:n}),e("p",{class:P({red:p(i),green:!p(i)})},T(p(c)),3)])]))}},we=$(be,[["__scopeId","data-v-7c90a8c2"]]);const Ie=t=>(k("data-v-ef2438d3"),t=t(),C(),t),Me={class:"movements"},Se=Ie(()=>e("h2",{class:"title"},"Historial",-1)),ke={class:"content"},Ce={__name:"Index",props:{movements:{type:Array,default:()=>[]}},emits:["remove"],setup(t,{emit:l}){const s=t,n=c=>{l("remove",c)};return(c,i)=>(d(),v("div",Me,[Se,e("div",ke,[(d(!0),v(B,null,X(s.movements,u=>(d(),V(we,{key:u.id,movement:u,onRemove:n},null,8,["movement"]))),128))])]))}},Ae=$(Ce,[["__scopeId","data-v-ef2438d3"]]),Te="/cashflow-project/assets/close-icon-c67e0a46.svg";const De=t=>(k("data-v-64f7330d"),t=t(),C(),t),Ne={class:"modal"},Be=De(()=>e("p",null,"Nuevo movimiento",-1)),Ve={class:"body"},Re={__name:"Modal",emits:["close"],setup(t,{emit:l}){const s=()=>l("close");return(n,c)=>(d(),v("div",Ne,[e("div",{class:"head"},[Be,e("img",{src:Te,alt:"cerrar",onClick:s})]),e("div",Ve,[S(n.$slots,"default",{},void 0,!0)])]))}},Le=$(Re,[["__scopeId","data-v-64f7330d"]]);const w=t=>(k("data-v-9f8cc662"),t=t(),C(),t),Fe=["onSubmit"],Ge={class:"field"},He=w(()=>e("label",null,"Titulo",-1)),Ue={class:"field"},je=w(()=>e("label",null,"Monto",-1)),Oe={class:"field"},Pe=w(()=>e("label",null,"Descripción",-1)),Xe={class:"field"},ze=w(()=>e("label",null,"Tipo de movimiento",-1)),Je={class:"radio-label"},qe=w(()=>e("span",null,"Ingreso",-1)),Ee={class:"radio-label"},We=w(()=>e("span",null,"Gasto",-1)),Ke=w(()=>e("div",{class:"action"},[e("button",null,"Agregar movimiento")],-1)),Qe={__name:"Action",emits:["create"],setup(t,{emit:l}){const s=m(!1),n=m(""),c=m(0),i=m(""),u=m("Ingreso"),h=()=>{s.value=!s.value,l("create",{title:n.value,description:i.value,amount:u.value==="Ingreso"?c.value:-c.value,time:new Date,id:new Date().getTime()}),n.value="",c.value=0,i.value="",u.value="Ingreso"};return(g,o)=>(d(),v(B,null,[e("button",{onClick:o[0]||(o[0]=a=>s.value=!0)},"Agregar movimiento"),(d(),V(J,{to:"#app"},[f(I(Le,{onClose:o[6]||(o[6]=a=>s.value=!1)},{default:M(()=>[e("form",{onSubmit:z(h,["prevent"])},[e("div",Ge,[He,f(e("input",{type:"text","onUpdate:modelValue":o[1]||(o[1]=a=>n.value=a)},null,512),[[D,n.value]])]),e("div",Ue,[je,f(e("input",{type:"number","onUpdate:modelValue":o[2]||(o[2]=a=>c.value=a)},null,512),[[D,c.value]])]),e("div",Oe,[Pe,f(e("textarea",{rows:"4","onUpdate:modelValue":o[3]||(o[3]=a=>i.value=a)},null,512),[[D,i.value]])]),e("div",Xe,[ze,e("label",Je,[f(e("input",{type:"radio","onUpdate:modelValue":o[4]||(o[4]=a=>u.value=a),value:"Ingreso"},null,512),[[R,u.value]]),qe]),e("label",Ee,[f(e("input",{type:"radio","onUpdate:modelValue":o[5]||(o[5]=a=>u.value=a),value:"Gasto"},null,512),[[R,u.value]]),We])]),Ke],40,Fe)]),_:1},512),[[N,s.value]])]))],64))}},Ye=$(Qe,[["__scopeId","data-v-9f8cc662"]]),et={__name:"Home",setup(t){const l=()=>{localStorage.setItem("movements",JSON.stringify(u.value))},s=o=>{u.value.push(o),l()},n=o=>{u.value=u.value.filter(a=>a.id!==o),l()},c=m(0),i=o=>c.value=o,u=m([]),h=y(()=>{const o=u.value.filter(a=>{const _=new Date,r=_.setDate(_.getDate()-30);return a.time>=r}).map(a=>a.amount);return o.map((a,_)=>o.slice(0,_+1).reduce((x,b)=>x+b,0))}),g=y(()=>u.value.reduce((o,a)=>o+a.amount,0));return q(()=>{const o=JSON.parse(localStorage.getItem("movements"));Array.isArray(o)&&(u.value=o==null?void 0:o.map(a=>({...a,time:new Date(a.time)})))}),(o,a)=>(d(),V(oe,null,{header:M(()=>[I(le)]),resume:M(()=>[I(_e,{label:"Ahorro total",amount:c.value,"total-amount":p(g)},{graphic:M(()=>[I(fe,{amounts:p(h),onSelect:i},null,8,["amounts"])]),action:M(()=>[I(Ye,{onCreate:s})]),_:1},8,["amount","total-amount"])]),movements:M(()=>[I(Ae,{movements:u.value,onRemove:n},null,8,["movements"])]),_:1}))}};export{et as default};
